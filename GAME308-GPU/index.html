<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>GAME 308</title>
    <link rel="stylesheet" type="text/css" href="../HumberStyle.css" media="all" />
</head>
<body>
    <div id="header"> <b>GAME 308 GPU </b><br />Vulkan</div>
    <ul class="nav">
        <li class="nav"><a class="nav" href="../index.html"> Home </a><br /></li>
        <li class="nav"><a class="nav" href="../MySchedule"> My schedule </a><br /></li>
        <li class="nav"><a class="nav" href="../AboutMe"> About me </a><br /></li>
        <li class="nav"><a class="nav" href="../ETC"> /etc </a><br /></li>
    </ul>

    <div id="rightsidebar">
        <h3> Helpful tools</h3>
        <a class="nav" href="../Rubrics/programmingRubric.html">General Programming Rubric</a><br />
        <a class="nav" href="https://vulkan-tutorial.com/Introduction">Vulkan Tutorial</a><br />
        <a class="nav" href="../GameDev.html"><B>Get GameDev here</B></a><br />
        <a class="nav" href="../CodeDepot/ComponentFramework24.0.4 Vulkan.zip">ComponentFramework24.0.4 Vulkan.zip</a><br />
        <a class="nav" href="compileShaders.bat">compileShaders.bat</a><br />
        <a class="nav" href="simplePhong.vert"> simplePhong.vert</a><br />
        <a class="nav" href="simplePhong.frag"> simplePhong.frag</a><br />
        <a class="nav" href="glslc.exe">glslc.exe</a><br />
        <a class="nav" href="phong.vert"> phong.vert</a><br />
        <a class="nav" href="phong.frag"> phong.frag</a><br />   
    </div>

    <H1> Welcome to Graphics 308 - GPU programming with Vulkan </H1>
    <div>

        <H2>Assignment 0:(not graded)<br /> </H2>
        <p>
            You really need to download the latest copy of GameDev.<br />
            Grab a new copy of ComponentFramework24.0.4 Vulkan.zip as well <br/>
        </p>
       <H2>Assignment 1:(15/20)<br /> </H2>
       <p>
     Create a two light system. This will require you to modify the shaders and recompile the shaders. You will also need to modify
     the UBO to create a cameraUBO and a lighsUBO on both the CPU and GPU to carry the lighing data.<br />
     In order to do this task, you'll need change some of my code to something way better. <br/>
     Let's start this off by messing with CreateUniformBuffers(). Check out the following code bits<br/>
    Part 1:<br/>       
    <textarea class="code" spellcheck="false" rows=6>
       struct BufferMemory {
          VkBuffer bufferID;
          VkDeviceMemory bufferMemoryID;
          VkDeviceSize bufferMemoryLength;
        };  
     </textarea><br/><br/>

      <textarea class="code" spellcheck="false" rows=4>
           template<class T> 
           std::vector<BufferMemory>  VulkanRenderer::CreateUniformBuffers() {
     </textarea><br/>
           In class I showed you how how to build the CreateUniformBuffers as a templated function. I'm sure you can do it.  <br/>
           Another function we should template is UpdateUniformBuffer(...)<br/>
      <textarea class="code" spellcheck="false" rows=8>
template <class T>
        void VulkanRenderer::UpdateUniformBuffer(const T srcData, const BufferMemory &bufferMemory) {
            void* data;
            vkMapMemory(device, bufferMemory.bufferMemoryID, 0, sizeof(T), 0, &data);
            memcpy(data, &srcData, bufferMemory.bufferMemoryLength);
            vkUnmapMemory(device, bufferMemory.bufferMemoryID);
        }

      </textarea><br/>

     Part 2: <br/>
     <p>
       Now that you have data in a UBO(s), the trick is to get it into the pipeline. This requires dealing with descriptors. 
         I have dicussed them in class but now you'll have to really deal with them. Give it some thought, it might become obvious. <br/>
         I have rearranged OnCreate() in the VulkanRenderer.cpp file.       
     </p>
    <textarea class="code" spellcheck="false" rows=24>
         pickPhysicalDevice();
         createLogicalDevice();  
         createSwapChain(); 
         createImageViews();
         createRenderPass();
         createDepthResources();
         createFramebuffers();
 
         createCommandPool();
         CreateDescriptorSetLayout(); /// Modify Me
         CreateDescriptorPool();     /// Modify me

         Create2DTextureImage("./textures/mario_fire.png");
         LoadModelIndexed("./meshes/Mario.obj");
         CreateGraphicsPipeline("./shaders/simplePhong.vert.spv", "./shaders/simplePhong.frag.spv");
         cameraUboBuffers = CreateUniformBuffers<CameraUBO>();
         lightsUboBuffers = CreateUniformBuffers<LightsUBO>();

         CreateDescriptorSets(); /// Modify me
 
         CreateCommandBuffers();
         createSyncObjects();

         </textarea><br/>
     Extra: Create ambient, difffuse[], and spectular[] colours for the new light system.<br />
     Extra: Create more that two lights.<br />
 </p>

            
    </div>
</body>
</html>

